<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robo Competition Registration</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/Se8TLnw.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Poppins', 'Roboto', Arial, sans-serif;
            line-height: 1.8;
            color: #FFFFFF;
            background: linear-gradient(135deg, #121212 0%, #003087 100%);
            background-image: url('https://i.imgur.com/Se8TLnw.png');
            background-size: 50%;
            background-repeat: no-repeat;
            background-position: center;
            background-attachment: fixed;
            padding: 40px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
            transition: background 0.3s ease, color 0.3s ease;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            opacity: 0.2;
            z-index: -1;
            transition: opacity 0.3s ease;
        }
        /* Light Mode Styles */
        body.light-mode {
            background: linear-gradient(135deg, #FFFFFF 0%, #E0E0E0 100%);
            background-image: url('https://i.imgur.com/Se8TLnw.png');
            background-size: 50%;
            background-repeat: no-repeat;
            background-position: center;
            background-attachment: fixed;
            color: #333333;
            transition: background 0.3s ease, color 0.3s ease;
        }
        body.light-mode::before {
            opacity: 0.1;
        }
        body.light-mode .container {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(220, 220, 220, 0.9));
            border: 1px solid #CCC;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }
        body.light-mode h2,
        body.light-mode p,
        body.light-mode li,
        body.light-mode label {
            color: #333333;
            text-shadow: none;
        }
        body.light-mode h1 {
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }
        body.light-mode h2 {
            border-bottom: 2px solid #003087;
        }
        body.light-mode .team-member {
            background: linear-gradient(145deg, rgba(240, 240, 240, 0.9), rgba(200, 200, 200, 0.8));
            border: 1px solid #CCC;
        }
        body.light-mode .team-member:hover {
            background: linear-gradient(145deg, rgba(220, 220, 220, 0.9), rgba(180, 180, 180, 0.8));
        }
        body.light-mode .tooltip .tooltiptext {
            background-color: #003087;
            color: #FFFFFF;
        }
        body.light-mode .tooltip .tooltiptext::after {
            border-color: #003087 transparent transparent transparent;
        }
        body.light-mode input[type="text"],
        body.light-mode input[type="number"],
        body.light-mode input[type="email"],
        body.light-mode input[type="tel"],
        body.light-mode select {
            background: linear-gradient(145deg, rgba(220, 220, 220, 0.9), rgba(240, 240, 240, 0.8));
            color: #333333;
            border: 1px solid #CCC;
        }
        body.light-mode select option {
            background: #E0E0E0;
            color: #333333;
        }
        body.light-mode select option:checked {
            background: #CCCCCC;
            color: #333333;
        }
        body.light-mode input:focus,
        body.light-mode select:focus {
            border-color: #003087;
            box-shadow: 0 0 5px rgba(0, 48, 135, 0.5);
        }
        body.light-mode .error,
        body.light-mode .field-error {
            color: #FF4040;
        }
        body.light-mode .message.success {
            background: rgba(220, 220, 220, 0.9);
            color: #333333;
            border: 2px solid #00FF00;
        }
        body.light-mode .message.error {
            background: rgba(220, 220, 220, 0.9);
            color: #333333;
            border: 2px solid #FF4040;
        }
        body.light-mode .overview-section {
            background: linear-gradient(145deg, rgba(240, 240, 240, 0.9), rgba(200, 200, 200, 0.8));
            border: 1px solid #CCC;
        }
        body.light-mode .overview-section h3 {
            color: #003087;
        }
        body.light-mode .overview-section p,
        body.light-mode .overview-section li {
            color: #333333;
        }
        .container {
            max-width: 900px;
            background: linear-gradient(145deg, rgba(30, 30, 30, 0.95), rgba(50, 50, 50, 0.9));
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
            border: 1px solid #333;
            backdrop-filter: blur(10px);
            animation: fadeIn 2s ease-in-out;
            position: relative;
            z-index: 1;
            transition: background 0.5s ease, border 0.5s ease, box-shadow 0.5s ease;
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        h1 {
            flex-grow: 1;
            text-align: center;
            font-size: 36px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: slideDown 1s ease-in-out;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            transition: text-shadow 0.5s ease, color 0.5s ease;
        }
        h2 {
            font-size: 24px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: #003087;
            margin-top: 30px;
            border-bottom: 2px solid #003087;
            padding-bottom: 5px;
            animation: slideInLeft 1s ease-in-out;
            transition: color 0.5s ease;
        }
        label {
            display: block;
            font-size: 16px;
            color: #FFFFFF;
            margin: 10px 0 5px;
            animation: slideInRight 1.2s ease-in-out;
            transition: color 0.5s ease;
        }
        input[type="text"],
        input[type="number"],
        input[type="email"],
        input[type="tel"],
        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 5px;
            border: 1px solid #444;
            border-radius: 5px;
            background: linear-gradient(145deg, rgba(42, 42, 42, 0.7), rgba(60, 60, 60, 0.6));
            color: #FFFFFF;
            font-size: 16px;
            transition: all 0.3s ease;
            animation: slideInRight 1.2s ease-in-out;
        }
        select option {
            background: #2A2A2A;
            color: #FFFFFF;
        }
        select option:checked {
            background: #1A1A1A;
            color: #FFFFFF;
        }
        input:focus,
        select:focus {
            outline: none;
            border-color: #003087;
            box-shadow: 0 0 5px rgba(0, 48, 135, 0.5);
        }
        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            animation: slideInRight 1.2s ease-in-out;
        }
        .radio-group label {
            display: inline;
            margin: 0;
        }
        .radio-group input {
            margin-right: 5px;
        }
        .team-member {
            background: linear-gradient(145deg, rgba(42, 42, 42, 0.9), rgba(60, 60, 60, 0.8));
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid #444;
            transition: background 0.5s ease, border 0.5s ease, box-shadow 0.5s ease;
        }
        .team-member:hover {
            background: linear-gradient(145deg, rgba(60, 60, 60, 0.9), rgba(80, 80, 80, 0.8));
            box-shadow: 0 0 15px rgba(0, 48, 135, 0.6);
        }
        button, input[type="submit"] {
            padding: 12px 25px;
            background: linear-gradient(145deg, #003087, #0055A4);
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover, input[type="submit"]:hover {
            background: linear-gradient(145deg, #0055A4, #003087);
            color: #FFFFFF;
            box-shadow: 0 0 20px rgba(0, 48, 135, 0.8);
            transform: scale(1.05);
        }
        body.light-mode button,
        body.light-mode input[type="submit"] {
            background: linear-gradient(145deg, #003087, #0055A4);
            color: #FFFFFF;
        }
        body.light-mode button:hover,
        body.light-mode input[type="submit"]:hover {
            background: linear-gradient(145deg, #0055A4, #003087);
            color: #FFFFFF;
            box-shadow: 0 0 20px rgba(0, 48, 135, 0.8);
            transform: scale(1.05);
        }
        .error {
            color: #FF4040;
            font-size: 14px;
            margin-bottom: 15px;
            display: none;
        }
        .field-error {
            color: #FF4040;
            font-size: 12px;
            margin-bottom: 10px;
            display: none;
            animation: slideInRight 1.2s ease-in-out;
        }
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #FFFFFF;
            border-top: 5px solid #003087;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(30, 30, 30, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            text-align: center;
            color: #FFFFFF;
            font-size: 18px;
        }
        .message.success {
            border: 2px solid #00FF00;
        }
        .message.error {
            border: 2px solid #FF4040;
        }
        .back-btn {
            display: inline-block;
            padding: 8px 15px;
            background: linear-gradient(145deg, #003087, #0055A4);
            color: #FFFFFF;
            text-decoration: none;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .back-btn:hover {
            background: linear-gradient(145deg, #0055A4, #003087);
            color: #FFFFFF;
            box-shadow: 0 0 20px rgba(0, 48, 135, 0.8);
            transform: scale(1.05);
        }
        body.light-mode .back-btn {
            background: linear-gradient(145deg, #003087, #0055A4);
            color: #FFFFFF;
        }
        body.light-mode .back-btn:hover {
            background: linear-gradient(145deg, #0055A4, #003087);
            color: #FFFFFF;
            box-shadow: 0 0 20px rgba(0, 48, 135, 0.8);
            transform: scale(1.05);
        }
        .tooltip {
            position: relative;
            cursor: pointer;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #003087;
            color: #FFFFFF;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: calc(100% + 5px);
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
            font-size: 14px;
        }
        .tooltip .tooltiptext::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #003087 transparent transparent transparent;
        }
        .tooltip .close-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: #FFFFFF;
            font-size: 16px;
            cursor: pointer;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .tooltip.active .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: 5px;
            background: linear-gradient(to right, #003087, #0078D4);
            z-index: 1000;
            transition: width 0.3s ease;
            animation: pulseColor 2s infinite;
        }
        @keyframes pulseColor {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        .theme-toggle {
            width: 35px;
            height: 35px;
            aspect-ratio: 1 / 1;
            background: #FFC107;
            border: none;
            border-radius: 50%;
            color: #121212;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 0 12px rgba(255, 193, 7, 0.8);
        }
        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 18px rgba(255, 193, 7, 1);
        }
        body.light-mode .theme-toggle {
            background: #FFC107;
            color: #121212;
            box-shadow: 0 0 12px rgba(255, 193, 7, 0.8);
        }
        body.light-mode .theme-toggle:hover {
            box-shadow: 0 0 18px rgba(255, 193, 7, 1);
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .theme-toggle.animate-icon {
            animation: spin 0.5s ease-in-out;
        }
        .theme-toggle .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #003087;
            color: #FFFFFF;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1002;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
            font-size: 12px;
        }
        .theme-toggle:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        body.light-mode .theme-toggle .tooltiptext {
            background-color: #003087;
            color: #FFFFFF;
        }
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background: linear-gradient(145deg, #003087, #0055A4);
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            animation: fadeInOut 0.3s ease-in-out;
        }
        .back-to-top:hover {
            background: linear-gradient(145deg, #0055A4, #003087);
            color: #FFFFFF;
            box-shadow: 0 0 20px rgba(0, 48, 135, 0.8);
            transform: scale(1.05);
        }
        body.light-mode .back-to-top {
            background: linear-gradient(145deg, #003087, #0055A4);
            color: #FFFFFF;
        }
        body.light-mode .back-to-top:hover {
            background: linear-gradient(145deg, #0055A4, #003087);
            color: #FFFFFF;
            box-shadow: 0 0 20px rgba(0, 48, 135, 0.8);
            transform: scale(1.05);
        }
        .overview-section {
            background: linear-gradient(145deg, rgba(42, 42, 42, 0.9), rgba(60, 60, 60, 0.8));
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #444;
            transition: background 0.5s ease, border 0.5s ease;
        }
        .overview-section h3 {
            font-size: 20px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: #003087;
            margin-bottom: 10px;
            border-bottom: 2px solid #003087;
            padding-bottom: 5px;
        }
        .overview-section p {
            font-size: 16px;
            color: #FFFFFF;
            margin-bottom: 10px;
        }
        .overview-section ul {
            list-style-type: disc;
            padding-left: 20px;
            margin-bottom: 10px;
        }
        .overview-section li {
            font-size: 16px;
            color: #FFFFFF;
            margin-bottom: 5px;
        }
        .overview-section a {
            color: #00BFFF;
            text-decoration: none;
            font-weight: 600;
        }
        .overview-section a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            body {
                padding: 20px;
                background-size: cover;
            }
            body.light-mode {
                background-size: cover;
            }
            body.light-mode .container {
                background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(220, 220, 220, 0.9));
            }
            .container {
                padding: 30px;
                border-radius: 0;
                box-shadow: none;
                border: none;
                max-width: 100%;
                min-height: 100vh;
            }
            h1 {
                font-size: 24px;
                margin-bottom: 0;
            }
            h2 {
                font-size: 20px;
                margin-top: 20px;
            }
            label, input, select {
                font-size: 14px;
            }
            .message {
                width: 80%;
                font-size: 16px;
            }
            .tooltip .tooltiptext {
                width: 90%;
                max-width: 250px;
                bottom: auto;
                top: calc(100% + 10px);
                left: 50%;
                transform: translateX(-50%);
                z-index: 1001;
                font-size: 12px;
                padding: 10px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            }
            .tooltip .tooltiptext::after {
                top: auto;
                bottom: 100%;
                border-color: transparent transparent #003087 transparent;
            }
            body.light-mode .tooltip .tooltiptext {
                background-color: #003087;
                color: #FFFFFF;
            }
            body.light-mode .tooltip .tooltiptext::after {
                border-color: transparent transparent #003087 transparent;
            }
            .tooltip:hover .tooltiptext {
                visibility: hidden;
                opacity: 0;
            }
            .tooltip.active .tooltiptext {
                visibility: visible;
                opacity: 1;
            }
            .theme-toggle {
                width: 30px;
                height: 30px;
                font-size: 16px;
            }
            .header-content {
                gap: 10px;
                flex-wrap: wrap;
            }
            .theme-toggle .tooltiptext {
                visibility: hidden;
                opacity: 0;
            }
            .theme-toggle.active .tooltiptext {
                visibility: visible;
                opacity: 1;
                top: calc(100% + 5px);
            }
            .back-to-top {
                bottom: 10px;
                right: 10px;
                padding: 8px 16px;
                font-size: 14px;
            }
            .back-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
            .overview-section {
                padding: 15px;
            }
            .overview-section h3 {
                font-size: 18px;
            }
            .overview-section p,
            .overview-section li {
                font-size: 14px;
            }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes slideInLeft {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInRight {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @media print {
            body {
                background: #FFFFFF;
                color: #000000;
                padding: 20mm;
                background-image: none;
            }
            body::before {
                display: none;
            }
            .container {
                background: none;
                box-shadow: none;
                border: none;
                padding: 0;
            }
            h1, h2 {
                color: #003087;
            }
            label, input, select {
                color: #000000;
            }
            .team-member {
                background: none;
                border: none;
            }
            .progress-bar {
                display: none;
            }
            .theme-toggle {
                display: none;
            }
            .back-to-top {
                display: none;
            }
            @page {
                size: A4;
                margin: 20mm;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>
    <div class="message" id="messageBox"></div>

    <div class="container">
        <div class="header-content">
            <a href="index.html" class="back-btn tooltip">
                Back to Rulebook
                <span class="tooltiptext">Return to the Robo Competition Rule Book page.<button class="close-btn">✖</button></span>
            </a>
            <h1>Robo Competition Registration</h1>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Switch to Light Mode">
                <span class="tooltiptext" id="theme-tooltip">Switch to Light Mode</span>
                ☀️
            </button>
        </div>

        <div class="overview-section">
            <h3>Competition Overview</h3>
            <p>Welcome to the Robo Competition, organized by IEEE Technical Teams from Horus University, Benha University, and South Valley University! This thrilling challenge brings together teams to showcase their innovative robots in three unique stages, all within a tight <strong>10-minute window</strong>. The competition tests <strong>speed</strong>, <strong>performance</strong>, <strong>strategy</strong>, <strong>problem-solving</strong>, and <strong>teamwork</strong>.</p>
            <h3>Robot Requirements</h3>
            <ul>
                <li>Maximum size: 30 cm × 30 cm.</li>
                <li>Type: Can be remotely operated or autonomous, depending on the round.</li>
                <li>Power: Must have an independent power source (no external power connections during the game).</li>
            </ul>
            <h3>Rounds Overview</h3>
            <ul>
                <li><strong>Round 1 - Balloon Popping:</strong> Your robot must pop specific balloons (Target and Bonus) while avoiding Penalty and Opponent's balloons. Remote control is allowed.</li>
                <li><strong>Round 2 - Color Cube Arrangement:</strong> Collect colored cubes (representing your team, opponent, or neutral) and recreate a specific shape shown on a poster.</li>
                <li><strong>Round 3 - Maze Challenge (Line Follower):</strong> Navigate an autonomous robot through a single-row maze to reach the end as quickly as possible.</li>
            </ul>
            <p>For detailed rules, please refer to the <a href="Rule_book.pdf" target="_blank">official Rule Book</a>.</p>
        </div>

        <form id="registrationForm">
            <h2>Team Leader Information (Member 1)</h2>
            <label for="leaderName">Name</label>
            <input type="text" id="leaderName" name="leaderName" placeholder="Enter your name" required>
            <div class="field-error" id="leaderNameError">Please enter a valid name (at least 2 characters).</div>

            <label for="leaderAge">Age</label>
            <input type="number" id="leaderAge" name="leaderAge" min="16" placeholder="Enter your age" required>
            <div class="field-error" id="leaderAgeError">Age must be 16 or older.</div>

            <label>Are you a university student?</label>
            <div class="radio-group">
                <label><input type="radio" name="isStudent" value="yes" onchange="toggleUniversityField()" required> Yes</label>
                <label><input type="radio" name="isStudent" value="no" onchange="toggleUniversityField()"> No</label>
            </div>

            <div id="universityField" style="display: none;">
                <label for="universityList">Select your university</label>
                <select id="universityList" name="university">
                    <option value="">Select your university</option>
                    <option value="Horus University">Horus University</option>
                    <option value="Cairo University">Cairo University</option>
                    <option value="Ain Shams University">Ain Shams University</option>
                    <option value="Alexandria University">Alexandria University</option>
                    <option value="Assiut University">Assiut University</option>
                    <option value="Tanta University">Tanta University</option>
                    <option value="Mansoura University">Mansoura University</option>
                    <option value="Zagazig University">Zagazig University</option>
                    <option value="Helwan University">Helwan University</option>
                    <option value="Minia University">Minia University</option>
                    <option value="Menoufia University">Menoufia University</option>
                    <option value="Suez Canal University">Suez Canal University</option>
                    <option value="South Valley University">South Valley University</option>
                    <option value="Beni-Suef University">Beni-Suef University</option>
                    <option value="Fayoum University">Fayoum University</option>
                    <option value="Kafr El-Sheikh University">Kafr El-Sheikh University</option>
                    <option value="Damanhour University">Damanhour University</option>
                    <option value="Sohag University">Sohag University</option>
                    <option value="Port Said University">Port Said University</option>
                    <option value="Damietta University">Damietta University</option>
                    <option value="Aswan University">Aswan University</option>
                    <option value="Arish University">Arish University</option>
                    <option value="Benha University">Benha University</option>
                    <option value="New Valley University">New Valley University</option>
                    <option value="Matrouh University">Matrouh University</option>
                    <option value="German University in Cairo (GUC)">German University in Cairo (GUC)</option>
                    <option value="British University in Egypt (BUE)">British University in Egypt (BUE)</option>
                    <option value="American University in Cairo (AUC)">American University in Cairo (AUC)</option>
                    <option value="Future University in Egypt">Future University in Egypt</option>
                    <option value="October 6 University">October 6 University</option>
                    <option value="Misr University for Science and Technology (MUST)">Misr University for Science and Technology (MUST)</option>
                    <option value="Misr International University (MIU)">Misr International University (MIU)</option>
                    <option value="Nile University">Nile University</option>
                    <option value="Sinai University">Sinai University</option>
                    <option value="Pharos University">Pharos University</option>
                    <option value="Heliopolis University">Heliopolis University</option>
                    <option value="Nahda University">Nahda University</option>
                    <option value="Badr University">Badr University</option>
                    <option value="Modern University for Technology and Information (MTI)">Modern University for Technology and Information (MTI)</option>
                    <option value="Salahuddin Al-Ayyubi University">Salahuddin Al-Ayyubi University</option>
                    <option value="Delta University for Science and Technology">Delta University for Science and Technology</option>
                    <option value="New Giza University (NGU)">New Giza University (NGU)</option>
                    <option value="Alamein International University">Alamein International University</option>
                    <option value="King Salman International University">King Salman International University</option>
                </select>
                <div class="field-error" id="universityError">Please select a university.</div>
            </div>

            <label for="leaderPhone">Phone Number</label>
            <input type="tel" id="leaderPhone" name="leaderPhone" placeholder="Enter your phone number" required>
            <div class="field-error" id="leaderPhoneError">Please enter a valid phone number (10-11 digits).</div>

            <label for="leaderEmail">Email</label>
            <input type="email" id="leaderEmail" name="leaderEmail" placeholder="Enter your email" required>
            <div class="field-error" id="leaderEmailError">Please enter a valid email address.</div>

            <h2>Team Information</h2>
            <label for="teamName">Team Name</label>
            <input type="text" id="teamName" name="teamName" placeholder="Enter your team name" required>
            <div class="field-error" id="teamNameError">Please enter a valid team name (at least 2 characters).</div>

            <label for="additionalMembersCount">Number of Additional Team Members (1-5)</label>
            <input type="number" id="additionalMembersCount" name="additionalMembersCount" min="1" max="5" value="1" onchange="updateTeamMembers()" required>
            <div class="field-error" id="additionalMembersCountError">Number of additional team members must be between 1 and 5.</div>

            <div id="teamMembers"></div>

            <input type="submit" value="Register" id="submitBtn">
        </form>
    </div>

    <button class="back-to-top" onclick="scrollToTop()">⬆ Back to Top</button>

    <script>
        document.querySelectorAll('.tooltip').forEach(tooltip => {
            const tooltipText = tooltip.querySelector('.tooltiptext');
            const closeBtn = tooltipText.querySelector('.close-btn');

            tooltip.addEventListener('click', function(event) {
                event.stopPropagation();
                if (window.matchMedia("(max-width: 768px)").matches) {
                    document.querySelectorAll('.tooltip.active').forEach(t => {
                        if (t !== this) {
                            t.classList.remove('active');
                        }
                    });

                    if (this.classList.contains('active')) {
                        this.classList.remove('active');
                    } else {
                        this.classList.add('active');
                    }
                }
            });

            tooltip.addEventListener('mouseover', function() {
                if (!window.matchMedia("(max-width: 768px)").matches) {
                    document.querySelectorAll('.tooltip').forEach(t => {
                        if (t !== this) {
                            t.querySelector('.tooltiptext').style.visibility = 'hidden';
                            t.querySelector('.tooltiptext').style.opacity = '0';
                        }
                    });
                    tooltipText.style.visibility = 'visible';
                    tooltipText.style.opacity = '1';
                }
            });

            tooltip.addEventListener('mouseout', function() {
                if (!window.matchMedia("(max-width: 768px)").matches) {
                    tooltipText.style.visibility = 'hidden';
                    tooltipText.style.opacity = '0';
                }
            });

            closeBtn.addEventListener('click', function(event) {
                event.stopPropagation();
                tooltip.classList.remove('active');
            });
        });

        document.addEventListener('click', function(event) {
            if (window.matchMedia("(max-width: 768px)").matches) {
                const tooltips = document.querySelectorAll('.tooltip');
                let clickedInsideTooltip = false;

                tooltips.forEach(tooltip => {
                    if (tooltip.contains(event.target)) {
                        clickedInsideTooltip = true;
                    }
                });

                if (!clickedInsideTooltip) {
                    document.querySelectorAll('.tooltip.active').forEach(tooltip => {
                        tooltip.classList.remove('active');
                    });
                }
            }
        });

        window.addEventListener('scroll', () => {
            const winScroll = document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
        });

        function toggleTheme() {
            const body = document.body;
            const themeToggleBtn = document.querySelector('.theme-toggle');
            const themeTooltip = document.querySelector('#theme-tooltip');
            let opacity = 1;
            let blur = 0;
            let brightness = 1;

            function dissolve(timestamp) {
                opacity -= 0.02;
                blur += 0.1;
                brightness -= 0.02;

                body.style.opacity = opacity;
                body.style.filter = `brightness(${brightness}) blur(${blur}px)`;

                if (opacity > 0) {
                    requestAnimationFrame(dissolve);
                } else {
                    themeToggleBtn.classList.add('animate-icon');
                    if (body.classList.contains('light-mode')) {
                        body.classList.remove('light-mode');
                        themeToggleBtn.innerHTML = '<span class="tooltiptext" id="theme-tooltip">Switch to Light Mode</span>☀️';
                        themeToggleBtn.setAttribute('aria-label', 'Switch to Light Mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        body.classList.add('light-mode');
                        themeToggleBtn.innerHTML = '<span class="tooltiptext" id="theme-tooltip">Switch to Dark Mode</span>🌙';
                        themeToggleBtn.setAttribute('aria-label', 'Switch to Dark Mode');
                        localStorage.setItem('theme', 'light');
                    }
                    reappear();
                }
            }

            function reappear() {
                opacity += 0.02;
                blur -= 0.1;
                brightness += 0.02;

                body.style.opacity = opacity;
                body.style.filter = `brightness(${brightness}) blur(${blur}px)`;

                if (opacity < 1) {
                    requestAnimationFrame(reappear);
                } else {
                    body.style.opacity = 1;
                    body.style.filter = 'none';
                }
            }

            requestAnimationFrame(dissolve);
        }

        (function() {
            const savedTheme = localStorage.getItem('theme');
            const themeToggleBtn = document.querySelector('.theme-toggle');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                themeToggleBtn.innerHTML = '<span class="tooltiptext" id="theme-tooltip">Switch to Dark Mode</span>🌙';
                themeToggleBtn.setAttribute('aria-label', 'Switch to Dark Mode');
            } else {
                themeToggleBtn.innerHTML = '<span class="tooltiptext" id="theme-tooltip">Switch to Light Mode</span>☀️';
                themeToggleBtn.setAttribute('aria-label', 'Switch to Light Mode');
            }
        })();

        document.querySelector('.theme-toggle').addEventListener('click', function(event) {
            if (window.matchMedia("(max-width: 768px)").matches) {
                event.stopPropagation();
                if (this.classList.contains('active')) {
                    this.classList.remove('active');
                } else {
                    this.classList.add('active');
                }
            }
        });

        document.addEventListener('click', function(event) {
            if (window.matchMedia("(max-width: 768px)").matches) {
                const themeToggle = document.querySelector('.theme-toggle');
                if (!themeToggle.contains(event.target)) {
                    themeToggle.classList.remove('active');
                }
            }
        });

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        window.addEventListener('scroll', () => {
            const backToTopBtn = document.querySelector('.back-to-top');
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });

        function toggleUniversityField() {
            const isStudent = document.querySelector('input[name="isStudent"]:checked')?.value;
            const universityField = document.getElementById('universityField');
            const universityList = document.getElementById('universityList');

            if (isStudent === 'yes') {
                universityField.style.display = 'block';
                universityList.style.display = 'block';
                universityList.required = true;
            } else {
                universityField.style.display = 'none';
                universityList.style.display = 'none';
                universityList.required = false;
            }
        }

        function updateTeamMembers() {
            const count = parseInt(document.getElementById('additionalMembersCount').value);
            const errorDiv = document.getElementById('additionalMembersCountError');
            const teamMembersDiv = document.getElementById('teamMembers');

            if (count < 1 || count > 5) {
                errorDiv.style.display = 'block';
                return;
            } else {
                errorDiv.style.display = 'none';
            }

            teamMembersDiv.innerHTML = '';

            for (let i = 1; i <= count; i++) {
                const memberDiv = document.createElement('div');
                memberDiv.className = 'team-member';
                memberDiv.innerHTML = `
                    <h3>Team Member ${i + 1}</h3>
                    <label for="memberName${i}">Name</label>
                    <input type="text" id="memberName${i}" name="memberName${i}" placeholder="Enter member name" required>
                    <div class="field-error" id="memberName${i}Error">Please enter a valid name (at least 2 characters).</div>

                    <label for="memberAge${i}">Age</label>
                    <input type="number" id="memberAge${i}" name="memberAge${i}" min="16" placeholder="Enter member age" required>
                    <div class="field-error" id="memberAge${i}Error">Age must be 16 or older.</div>

                    <label for="memberPhone${i}">Phone Number</label>
                    <input type="tel" id="memberPhone${i}" name="memberPhone${i}" placeholder="Enter member phone number" required>
                    <div class="field-error" id="memberPhone${i}Error">Please enter a valid phone number (10-11 digits).</div>

                    <label for="memberEmail${i}">Email</label>
                    <input type="email" id="memberEmail${i}" name="memberEmail${i}" placeholder="Enter member email" required>
                    <div class="field-error" id="memberEmail${i}Error">Please enter a valid email address.</div>
                `;
                teamMembersDiv.appendChild(memberDiv);
            }
        }

        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function validatePhone(phone) {
            const phoneRegex = /^\d{10,11}$/;
            return phoneRegex.test(phone);
        }

        function validateName(name) {
            return name.trim().length >= 2;
        }

        function validateAge(age) {
            return age >= 16;
        }

        function showError(fieldId, errorId, message) {
            document.getElementById(errorId).textContent = message;
            document.getElementById(errorId).style.display = 'block';
            document.getElementById(fieldId).focus();
            return false;
        }

        function clearErrors() {
            document.querySelectorAll('.field-error').forEach(error => {
                error.style.display = 'none';
            });
        }

        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault();

            clearErrors();

            const leaderName = document.getElementById('leaderName').value;
            if (!validateName(leaderName)) {
                return showError('leaderName', 'leaderNameError', 'Please enter a valid name (at least 2 characters).');
            }

            const leaderAge = parseInt(document.getElementById('leaderAge').value);
            if (!validateAge(leaderAge)) {
                return showError('leaderAge', 'leaderAgeError', 'Age must be 16 or older.');
            }

            const isStudent = document.querySelector('input[name="isStudent"]:checked')?.value;
            if (!isStudent) {
                return showError('isStudent', 'isStudentError', 'Please select if you are a university student.');
            }

            if (isStudent === 'yes') {
                const university = document.getElementById('universityList').value;
                if (!university) {
                    return showError('universityList', 'universityError', 'Please select a university.');
                }
            }

            const leaderPhone = document.getElementById('leaderPhone').value;
            if (!validatePhone(leaderPhone)) {
                return showError('leaderPhone', 'leaderPhoneError', 'Please enter a valid phone number (10-11 digits).');
            }

            const leaderEmail = document.getElementById('leaderEmail').value;
            if (!validateEmail(leaderEmail)) {
                return showError('leaderEmail', 'leaderEmailError', 'Please enter a valid email address.');
            }

            const teamName = document.getElementById('teamName').value;
            if (!validateName(teamName)) {
                return showError('teamName', 'teamNameError', 'Please enter a valid team name (at least 2 characters).');
            }

            const count = parseInt(document.getElementById('additionalMembersCount').value);
            if (count < 1 || count > 5) {
                return showError('additionalMembersCount', 'additionalMembersCountError', 'Number of additional team members must be between 1 and 5.');
            }

            for (let i = 1; i <= count; i++) {
                const memberName = document.getElementById(`memberName${i}`).value;
                if (!validateName(memberName)) {
                    return showError(`memberName${i}`, `memberName${i}Error`, 'Please enter a valid name (at least 2 characters).');
                }

                const memberAge = parseInt(document.getElementById(`memberAge${i}`).value);
                if (!validateAge(memberAge)) {
                    return showError(`memberAge${i}`, `memberAge${i}Error`, 'Age must be 16 or older.');
                }

                const memberPhone = document.getElementById(`memberPhone${i}`).value;
                if (!validatePhone(memberPhone)) {
                    return showError(`memberPhone${i}`, `memberPhone${i}Error`, 'Please enter a valid phone number (10-11 digits).');
                }

                const memberEmail = document.getElementById(`memberEmail${i}`).value;
                if (!validateEmail(memberEmail)) {
                    return showError(`memberEmail${i}`, `memberEmail${i}Error`, 'Please enter a valid email address.');
                }
            }

            const loadingOverlay = document.getElementById('loadingOverlay');
            const messageBox = document.getElementById('messageBox');
            const submitBtn = document.getElementById('submitBtn');
            loadingOverlay.style.display = 'flex';
            submitBtn.disabled = true;

            const formData = new FormData(this);
            const url = 'https://script.google.com/macros/s/AKfycbz9fV9081y094hmfEpfsrgjmV-06wmcrnUp1QGSYubw4SAQiaZXMXOZjeFj1JVTi2w4/exec';

            fetch(url, {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(result => {
                loadingOverlay.style.display = 'none';
                submitBtn.disabled = false;

                if (result === 'Success') {
                    messageBox.className = 'message success';
                    messageBox.textContent = 'Registration submitted successfully!';
                    messageBox.style.display = 'block';
                    setTimeout(() => {
                        messageBox.style.display = 'none';
                        this.reset();
                        toggleUniversityField();
                        updateTeamMembers();
                    }, 3000);
                } else {
                    messageBox.className = 'message error';
                    messageBox.textContent = 'Error submitting registration. Please try again.';
                    messageBox.style.display = 'block';
                    setTimeout(() => {
                        messageBox.style.display = 'none';
                    }, 3000);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                loadingOverlay.style.display = 'none';
                submitBtn.disabled = false;
                messageBox.className = 'message error';
                messageBox.textContent = 'Error submitting registration. Please try again.';
                messageBox.style.display = 'block';
                setTimeout(() => {
                    messageBox.style.display = 'none';
                }, 3000);
            });
        });

        updateTeamMembers();
    </script>
</body>
</html>
